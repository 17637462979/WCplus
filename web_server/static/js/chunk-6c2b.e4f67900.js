(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c2b"],{"83F3":function(e,t,n){},CyXH:function(e,t,n){"use strict";n.r(t);var i=n("ytsJ"),r=n("t3Un");var s=n("Mj6V"),a=n.n(s),o=(n("pdi6"),{name:"Crawler",data:function(){return{weixins:[{nickname:"拼命牵手WCplus中...",nick_name:"稍等几秒钟...",reading:"0",more:"0"}],filter:{type:!0,num:"",num_range:[{label:"最近10篇",value:"10"},{label:"最近100篇",value:"100"},{label:"最近1000篇",value:"1000"},{label:"最近5000篇",value:"5000"},{label:"全部历史",value:"0"}],range:50,time_gap:"",time_picker_options:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}},{text:"最近半年",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-15552e6),e.$emit("pick",[n,t])}},{text:"最近一年",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-31536e6),e.$emit("pick",[n,t])}}]}},pause:0,progress:{busy:0,current:1,steps:[{title:"暂无采集步骤",des:"添加采集任务后 此处将显示采集进度",percent:100,color:"#ff000"}]}}},created:function(){a.a.start(),this.$socket.emit("ask_data","req_data"),a.a.done()},methods:{currentProcess:function(e){return this.progress.busy?e-1:e},format_timestamp:function(e){return Object(i.timestampFormat)(e)},formatTooltip:function(){return 0===this.filter.range?"仅采集文章列表":25===this.filter.range?"文章列表+正文内容":50===this.filter.range?"文章列表+阅读数据":75===this.filter.range?"文章列表+正文内容+阅读数据":100===this.filter.range?"仅阅读数据":void 0},begin2Crawl:function(){var e=this,t={range:this.filter.range,type:this.filter.type,num:this.filter.num,start_time:this.filter.time_gap[0],end_time:this.filter.time_gap[1]};if(0!==this.weixins.length||t.num){var n=this,i=!1;if(this.weixins.forEach(function(e){"?"===e.nick_name&&(console.log(e),n.$message({message:"需要点击该公众号的具体文章消除问号?",type:"warning"}),i=!0),"UNK"===e.nickname&&(console.log(e),n.$message({message:"需要点击公众号的全部消息来获得文章列表",type:"warning"}),i=!0),"0"===e.reading&&(console.log(e),n.$message({message:"请先点击该公众号的任意一一篇文章 直到时间显示刚刚",type:"warning"}),i=!0),"0"===e.more&&(console.log(e),n.$message({message:"请先上滑公众号加载更多历史消息 直到时间显示刚刚",type:"warning"}),i=!0)}),!i){if(console.log(this.weixins),t.type){if(!t.num)return void this.$message({message:"按数量采集 需要选定采集数量",type:"error"})}else if(!this.filter.time_gap)return void this.$message({message:"按时间采集 需要选定时间区间",type:"error"});this.$alert("采集的过程中不要使用参加采集的微信浏览其余微信公众号文章或历史文章列表 如需此操作 请先断开手机代理","注意",{confirmButtonText:"确定",callback:function(n){e.$message({message:"采集任务添加成功",type:"success"}),function(e){Object(r.a)({url:"/crawler",method:"post",params:e})}(t)}})}}else this.$alert({message:"请先设置代理并操作微信来获取参数",type:"error"})},deleteWeixin:function(e){for(var t=0;t<this.weixins.length;t++)e===this.weixins[t].nick_name&&this.weixins.pop(t);!function(e){Object(r.a)({url:"/crawler",method:"delete",params:e})}({nick_name:e})},handlerPause:function(){this.pause=!this.pause,this.$socket.emit("pause",this.pause),this.$message({message:"暂停/恢复采集",type:"success"})}},socket:{events:{req_data:function(e){this.weixins=e},process:function(e){this.progress=e},pause:function(e){this.pause=!0}}}}),l=(n("a10A"),n("KHd+")),c=Object(l.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container unselectable"},[n("div",{staticClass:"w3-padding w3-border w3-round-large",staticStyle:{"margin-bottom":"20px","margin-left":"10px","margin-right":"10px",background:"rgba(0,0,0,0.04)","min-width":"360px"}},[n("el-steps",{attrs:{active:e.currentProcess(e.progress.current),"finish-status":"success","align-center":""}},e._l(e.progress.steps,function(e){return n("el-step",{key:e.title,attrs:{title:e.title,description:e.des}})}))],1),e._v(" "),n("el-progress",{staticStyle:{"margin-bottom":"20px","margin-left":"10px","margin-right":"10px","min-width":"360px"},attrs:{"text-inside":!0,"stroke-width":18,percentage:e.progress.steps[e.progress.current-1].percent}}),e._v(" "),e._l(e.weixins,function(t){return n("div",{key:t.nick_name,staticClass:"w3-round w3-card-4 weixin"},[n("header",{staticClass:"w3-container w3-round w3-green"},[n("h5",{staticStyle:{float:"left"}},[n("i",{staticClass:"fa fa-wechat"}),e._v(" "+e._s(t.nick_name))]),e._v(" "),n("el-tooltip",{staticStyle:{"margin-top":"10px",float:"right"},attrs:{content:"慎重 单击删除微信参数"}},[n("el-button",{staticClass:"w3-red",attrs:{size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(n){e.deleteWeixin(t.nick_name)}}})],1)],1),e._v(" "),n("div",{staticClass:"w3-container"},[n("p",[e._v("公众号 : "+e._s(t.nickname))]),e._v(" "),n("p",[e._v("历史消息: "+e._s(e.format_timestamp(t.more)))]),e._v(" "),n("p",[e._v("阅读数据: "+e._s(e.format_timestamp(t.reading)))])])])}),e._v(" "),n("div",{staticClass:"w3-round w3-card-4 weixin"},[e._m(0),e._v(" "),n("div",{staticClass:"w3-container"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-switch",{staticStyle:{display:"block","margin-top":"10px"},attrs:{align:"left","active-color":"#13ce66","inactive-color":"#ff3939","active-text":"数量","inactive-text":"时间"},model:{value:e.filter.type,callback:function(t){e.$set(e.filter,"type",t)},expression:"filter.type"}})],1)]),e._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-slider",{staticStyle:{"margin-top":"3px"},attrs:{"format-tooltip":e.formatTooltip,step:25,"show-stops":"","show-stop":""},model:{value:e.filter.range,callback:function(t){e.$set(e.filter,"range",t)},expression:"filter.range"}})],1)])],1),e._v(" "),e.filter.type?n("el-select",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{size:"small",placeholder:"请选择采集数量"},model:{value:e.filter.num,callback:function(t){e.$set(e.filter,"num",t)},expression:"filter.num"}},e._l(e.filter.num_range,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):n("el-date-picker",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{"picker-options":e.filter.time_picker_options,type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"-","start-placeholder":"开始","end-placeholder":"结束"},model:{value:e.filter.time_gap,callback:function(t){e.$set(e.filter,"time_gap",t)},expression:"filter.time_gap"}}),e._v(" "),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[e.progress.busy?n("el-button",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{loading:!0,type:"default",size:"small"},on:{click:function(t){e.begin2Crawl()}}},[e._v("正在采集")]):n("el-button",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{type:"success",size:"small"},on:{click:function(t){e.begin2Crawl()}}},[e._v("开始采集")])],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{type:"warning",size:"small"},on:{click:function(t){e.handlerPause()}}},[e._v("启动/暂停")])],1)],1)],1)])],2)},[function(){var e=this.$createElement,t=this._self._c||e;return t("header",{staticClass:"w3-container w3-round w3-blue"},[t("h5",[t("i",{staticClass:"fa fa-bug"}),this._v(" 采集")])])}],!1,null,"83a13c7e",null);c.options.__file="crawler.vue";t.default=c.exports},Mj6V:function(e,t,n){var i,r;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(r="function"==typeof(i=function(){var e={version:"0.2.0"},t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function n(e,t,n){return e<t?t:e>n?n:e}function i(e){return 100*(-1+e)}e.configure=function(e){var n,i;for(n in e)void 0!==(i=e[n])&&e.hasOwnProperty(n)&&(t[n]=i);return this},e.status=null,e.set=function(a){var o=e.isStarted();a=n(a,t.minimum,1),e.status=1===a?null:a;var l=e.render(!o),c=l.querySelector(t.barSelector),u=t.speed,p=t.easing;return l.offsetWidth,r(function(n){""===t.positionUsing&&(t.positionUsing=e.getPositioningCSS()),s(c,function(e,n,r){var s;return(s="translate3d"===t.positionUsing?{transform:"translate3d("+i(e)+"%,0,0)"}:"translate"===t.positionUsing?{transform:"translate("+i(e)+"%,0)"}:{"margin-left":i(e)+"%"}).transition="all "+n+"ms "+r,s}(a,u,p)),1===a?(s(l,{transition:"none",opacity:1}),l.offsetWidth,setTimeout(function(){s(l,{transition:"all "+u+"ms linear",opacity:0}),setTimeout(function(){e.remove(),n()},u)},u)):setTimeout(n,u)}),this},e.isStarted=function(){return"number"==typeof e.status},e.start=function(){e.status||e.set(0);var n=function(){setTimeout(function(){e.status&&(e.trickle(),n())},t.trickleSpeed)};return t.trickle&&n(),this},e.done=function(t){return t||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(t){var i=e.status;return i?("number"!=typeof t&&(t=(1-i)*n(Math.random()*i,.1,.95)),i=n(i+t,0,.994),e.set(i)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var t=0,n=0;e.promise=function(i){return i&&"resolved"!==i.state()?(0===n&&e.start(),t++,n++,i.always(function(){0==--n?(t=0,e.done()):e.set((t-n)/t)}),this):this}}(),e.render=function(n){if(e.isRendered())return document.getElementById("nprogress");o(document.documentElement,"nprogress-busy");var r=document.createElement("div");r.id="nprogress",r.innerHTML=t.template;var a,l=r.querySelector(t.barSelector),c=n?"-100":i(e.status||0),p=document.querySelector(t.parent);return s(l,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),t.showSpinner||(a=r.querySelector(t.spinnerSelector))&&u(a),p!=document.body&&o(p,"nprogress-custom-parent"),p.appendChild(r),r},e.remove=function(){l(document.documentElement,"nprogress-busy"),l(document.querySelector(t.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&u(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var r=function(){var e=[];function t(){var n=e.shift();n&&n(t)}return function(n){e.push(n),1==e.length&&t()}}(),s=function(){var e=["Webkit","O","Moz","ms"],t={};function n(n){return n=function(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}(n),t[n]||(t[n]=function(t){var n=document.body.style;if(t in n)return t;for(var i,r=e.length,s=t.charAt(0).toUpperCase()+t.slice(1);r--;)if((i=e[r]+s)in n)return i;return t}(n))}function i(e,t,i){t=n(t),e.style[t]=i}return function(e,t){var n,r,s=arguments;if(2==s.length)for(n in t)void 0!==(r=t[n])&&t.hasOwnProperty(n)&&i(e,n,r);else i(e,s[1],s[2])}}();function a(e,t){var n="string"==typeof e?e:c(e);return n.indexOf(" "+t+" ")>=0}function o(e,t){var n=c(e),i=n+t;a(n,t)||(e.className=i.substring(1))}function l(e,t){var n,i=c(e);a(e,t)&&(n=i.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function c(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function u(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return e})?i.call(t,n,t,e):i)||(e.exports=r)},a10A:function(e,t,n){"use strict";var i=n("83F3");n.n(i).a},pdi6:function(e,t,n){},t3Un:function(e,t,n){"use strict";var i=n("vDqi"),r=n.n(i).a.create({baseURL:"http://localhost:5000/api",timeout:5e3});t.a=r},ytsJ:function(e,t){e.exports={timestampFormat:function(e){function t(e){return(1===String(e).length?"0":"")+e}var n=parseInt((new Date).getTime()/1e3),i=n-e,r=new Date(1e3*n),s=new Date(1e3*e),a=s.getFullYear(),o=s.getMonth()+1,l=s.getDate(),c=s.getHours(),u=s.getMinutes();if(i<60)return"刚刚";if(i<3600)return Math.floor(i/60)+"分钟前";if(r.getFullYear()===a&&r.getMonth()+1===o&&r.getDate()===l)return"今天"+t(c)+":"+t(u);var p=new Date(1e3*(n-86400));return p.getFullYear()===a&&p.getMonth()+1===o&&p.getDate()===l?"昨天"+t(c)+":"+t(u):r.getFullYear()===a?t(o)+"月"+t(l)+"日 "+t(c)+":"+t(u):a+"年"+t(o)+"月"+t(l)+"日 "+t(c)+":"+t(u)}}}}]);